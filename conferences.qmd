---
title: "Conferences, seminars, workshops, visiting, invited talks, summer schools"
format:
  html:
    embed-resources: true
---

*Map automatically generated from conference locations.*

```{r}
#| echo: false
#| message: false
#| warning: false

# Carichiamo le librerie necessarie
library(leaflet)
library(magrittr)

# Carichiamo il database (con la virgola come separatore)
conferenze <- read.csv("conferenze_db.csv", stringsAsFactors = FALSE)

# Convertiamo le coordinate in numeri per evitare errori
conferenze$lat <- as.numeric(conferenze$lat)
conferenze$lng <- as.numeric(conferenze$lng)

# Rimuoviamo righe con dati mancanti
conferenze <- conferenze[!is.na(conferenze$lat) & !is.na(conferenze$lng), ]

# Definiamo i colori per le diverse attivitÃ  (Set1 ha colori ben distinti)
pal <- colorFactor(palette = "Set1", domain = conferenze$type)

leaflet(conferenze) %>%
  addTiles() %>%
  addCircleMarkers(
    ~lng, ~lat, 
    popup = ~paste0("<b>", event_name, "</b><br>", 
                   name, " - ", city, "<br>",
                   "<i>", type, "</i>"),
    color = ~pal(type),
    fillOpacity = 0.8,
    radius = 8,
    stroke = TRUE,
    weight = 1
  ) %>%
  addLegend(
    pal = pal, 
    values = ~type, 
    title = "Activity Type", 
    position = "bottomleft" # Legenda spostata per non coprire la mappa
  )
```

### Lista delle Conferenze

```{r}
#| echo: false
knitr::kable(conferenze[, c("event_name","name", "city", "type")], col.names = c("Activity", "Venue", "City", "Type"))
```
